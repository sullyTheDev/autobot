var a={title:'GrepoBot',version:'5.1',domain:window['location']['protocol']+'//bot.grepobot.com/',scriptDomain:window['location']['protocol']+'//cdn.jsdelivr.net/gh/sullyTheDev/autobot@1.1/',botWnd:'',botPremWnd:'',botEmailWnd:'',facebookWnd:'',isLogged:!1,Account:{player_id:Game['player_id'],player_name:Game['player_name'],world_id:Game['world_id'],locale_lang:Game['locale_lang'],premium_grepolis:Game['premium_user'],csrfToken:Game['csrfToken']},trial_time:0,premium_time:0,facebook_like:0,toolbox_element:null,init(){ConsoleLog.Log('Initialize Autobot',0);a['authenticate']();a['obServer']();a['isActive']();a['setToolbox']();a['initAjax']();a['initMapTownFeature']();a['fixMessage']();Assistant['init']()},setToolbox(){a['toolbox_element']=$('.nui_bot_toolbox')},authenticate(){DataExchanger.Auth('login',a.Account,function(A){ModuleManager['callbackAuth'](A)})},obServer(){$.Observer(GameEvents['notification']['push'])['subscribe']('GRCRTNotification',function(){$('#notification_area>.notification.getPremiumNotification')['on']('click',function(){a['getPremium']()})})},initWnd(){if(a['isLogged']){if(typeof a['botWnd']!='undefined'){try {a['botWnd']['close']()} catch {};a['botWnd']=void 0};if(typeof a['botPremWnd']!='undefined'){try {a['botPremWnd']['close']()} catch {};a['botPremWnd']=void 0};a['botWnd']=Layout['dialogWindow']['open']('',a['title']+' v'+a['version'],500,350,'',!1);a['botWnd']['setHeight']([350]);a['botWnd']['setPosition'](['center','center']);var A=a['botWnd']['getJQElement']();A['append']($('<div/>',{"class":'menu_wrapper',"style":'left: 78px; right: 14px'})['append']($('<ul/>',{"class":'menu_inner'})['prepend'](a['addMenuItem']('AUTHORIZE','Account','Account'))['prepend'](a['addMenuItem']('CONSOLE','Assistant','Assistant'))['prepend'](a['addMenuItem']('ASSISTANT','Console','Console'))));Autoattack!==void 0&&A['find']('.menu_inner li:last-child')['before'](a['addMenuItem']('ATTACKMODULE','Attack','Autoattack'));;Autobuild!==void 0&&A['find']('.menu_inner li:last-child')['before'](a['addMenuItem']('CONSTRUCTMODULE','Build','Autobuild'));;Autoculture!==void 0&&A['find']('.menu_inner li:last-child')['before'](a['addMenuItem']('CULTUREMODULE','Culture','Autoculture'));;Autofarm!==void 0&&A['find']('.menu_inner li:last-child')['before'](a['addMenuItem']('FARMMODULE','Farm','Autofarm'));;$('#Autobot-AUTHORIZE')['click']()}},addMenuItem(A,b,c){return $('<li/>')['append']($('<a/>',{"class":'submenu_link',"href":'#',"id":`Autobot-${A}`,"rel":c})['click'](function(){a['botWnd']['getJQElement']()['find']('li a.submenu_link')['removeClass']('active');$(this)['addClass']('active');a['botWnd']['setContent2'](a['getContent']($(this)['attr']('rel')));if($(this)['attr']('rel')=='Console'){var _=$('.terminal'),B=$('.terminal-output')[0]['scrollHeight'];_['scrollTop'](B)}})['append'](function(){return c!='Support'?$('<span/>',{"class":'left'})['append']($('<span/>',{"class":'right'})['append']($('<span/>',{"class":'middle'})['html'](b))):'<a id="help-button" onclick="return false;" class="confirm"></a>'}))},getContent(A){if(A=='Console')return ConsoleLog['contentConsole']();if(A=='Account')return a['contentAccount']();if(A=='Support')console.log("GrepoBot: SupportBTN Clicked");else{if(typeof window[A]!='undefined')return window[A]['contentSettings']();;return''}},contentAccount(){var A={"Name:":Game['player_name'],"World:":Game['world_id'],"Rank:":Game['player_rank'],"Towns:":Game['player_villages'],"Language:":Game['locale_lang'],"Premium: ":'[ CRACKED by xadam1 ]'},c=FormBuilder['gameWrapper']('Account','account_property_wrapper',$('<table/>',{"class":'game_table layout_main_sprite',"cellspacing":'0',"width":'100%'})['append'](()=>{var _=0,B=$('<tbody/>');$['each'](A,function(C,_b){B['append']($('<tr/>',{"class":_%2?'game_table_even':'game_table_odd'})['append']($('<td/>',{"style":'background-color: #DFCCA6;width: 30%;'})['html'](C))['append']($('<td/>')['html'](_b)));_++});return B}),'margin-bottom:9px;')[0]['outerHTML'];c+=$('<div/>',{"id":'grepobanner',"style":''})[0]['outerHTML'];return c},contentSupport(){console.log("GrepoBot: Support Window would load.")},checkAlliance(){!$('.allianceforum.main_menu_item')['hasClass']('disabled')&&DataExchanger['members_show'](function(A){if(A['plain']['html']!=void 0)jQuery['each']($(A['plain']['html'])['find']('#ally_members_body .ally_name a'),function(){var _=atob($(this)['attr']('href'));console['log'](JSON['parse'](_['substr'](0,_['length']-3)))})})},fixMessage(){HumanMessage['_initialize']=(function(_){return function(...args){_['apply'](this,args);$(window)['unbind']('click')}})(HumanMessage._initialize)},getPremium(){if(a['isLogged']){$.Observer(GameEvents['menu']['click'])['publish']({option_id:'premium'});if(typeof a['botPremWnd']!='undefined'){try {a['botPremWnd']['close']()} catch {};a['botPremWnd']=void 0};if(typeof a['botWnd']!='undefined'){try {a['botWnd']['close']()} catch {};a['botWnd']=void 0};a['botPremWnd']=Layout['dialogWindow']['open']('','Autobot v'+a['version']+' - Premium',500,350,'',!1);a['botPremWnd']['setHeight']([350]);a['botPremWnd']['setPosition'](['center','center']);var A=$('<div/>',{id:'payment'})['append']($('<div/>',{id:'left'})['append']($('<ul/>',{id:'time_options'})['append']($('<li/>',{class:'active'})['append']($('<span/>',{class:'amount'})['html']('1 Month'))['append']($('<span/>',{class:'price'})['html']('€&nbsp;4,99')))['append']($('<li/>')['append']($('<span/>',{class:'amount'})['html']('2 Month'))['append']($('<span/>',{class:'price'})['html']('€&nbsp;9,99'))['append']($('<div/>',{class:'referenceAmount'})['append']($('<div/>',{class:'reference',style:'transform: rotate(17deg);'})['html']('+12 Days&nbsp;'))))['append']($('<li/>')['append']($('<span/>',{class:'amount'})['html']('4 Months'))['append']($('<span/>',{class:'price'})['html']('€&nbsp;19,99'))['append']($('<div/>',{class:'referenceAmount'})['append']($('<div/>',{class:'reference',style:'transform: rotate(17deg);'})['html']('+36 Days&nbsp;'))))['append']($('<li/>')['append']($('<span/>',{class:'amount'})['html']('10 Months'))['append']($('<span/>',{class:'price'})['html']('€&nbsp;49,99'))['append']($('<div/>',{class:'referenceAmount'})['append']($('<div/>',{class:'reference',style:'transform: rotate(17deg);'})['html']('+120 Days&nbsp;'))))))['append']($('<div/>',{id:'right'})['append']($('<div/>',{id:'pothead'}))['append']($('<div/>',{id:'information'})['append']($('<span/>',{class:'text'})['html']('1 month for only €4,99'))['append']($('<span/>',{class:'button'})['html']('Buy')))),b=0;a['botPremWnd']['setContent2'](A);$('#time_options li')['on']('click',function(){$('#time_options li')['removeClass']('active');$(this)['addClass']('active');b=$(this)['index']();var _=$('#payment #information .text');if(!b)_['html']('1 month for only €4,99'); else if(b==1)_['html']('2 month +12 days for only €9,99');else b==2?_['html']('4 months +36 days for only €19,99'):b==3&&_['html']('10 months +120 days for only €49,99')});$('#payment #information')['on']('click',function(){var _=window['open'](a['domain']+'paypal/process.php?payment='+b+'&player_id='+a['Account']['player_id'],'grepolis_payment','directories=no,titlebar=no,toolbar=no,location=no,status=no,menubar=no,scrollbars=no,height=650,width=800'),B=setInterval(function(){!_||_['closed']&&(clearInterval(B),a['authenticate']())},500)})}},botFacebookWnd(){console.log("GrepoBot: Facebook Window would show")},upgrade3Days(){console.log("GrepoBot: 3day Upgrade called.")},initAjax(){$(document)['ajaxComplete']((A,b,c)=>{if(c['url']['indexOf'](a['domain'])==-1&&c['url']['indexOf'](a['scriptDomain'])==-1&&c['url']['indexOf']('/game/')!=-1&&b['readyState']==4&&b['status']==200){var d=c['url']['split']('?'),e=d[0]['substr'](6)+'/'+d[1]['split']('&')[1]['substr'](7);Autobuild!==void 0&&Autobuild['calls'](e);;Autoattack!==void 0&&Autoattack['calls'](e,b['responseText'])}})},verifyEmail(){a['isLogged']&&DataExchanger['email_validation'](A=>{if(A['plain']['html']!=void 0)DataExchanger.Auth('verifyEmail',{key:btoa(a['stringify']({player_id:a['Account']['player_id'],player_email:$(A['plain']['html'])['find']('#current_email_adress')['html']()}))},function(_){if(_['success']!=void 0)a['arrowActivated']()})})},randomize(a,b){return Math['floor'](Math['random']()*(b-a+1))+a},secondsToTime(A){var b=Math['floor'](A/86400),c=Math['floor']((A%86400)/3600),d=Math['floor'](((A%86400)%3600)/60);return b?`${b} days `:''+c?`${c} hours `:''+d?`${d} minutes `:''},timeToSeconds(A){var b=A['split'](':'),c=0,d=1;while (b['length']>0) {c+=d*parseInt(b['pop'](),10);d*=60};return c},arrowActivated(){var A=$('<div/>',{"class":'helpers helper_arrow group_quest d_w animate bounce',"data-direction":'w',"style":'top: 0; left: 360px; visibility: visible; display: none;'});a['toolbox_element']['append'](A);A['show']()['animate']({left:'138px'},'slow')['delay'](10000)['fadeOut']('normal');setTimeout(function(){a['botFacebookWnd']()},25000)},createNotification(A,b){var c=(typeof Layout['notify']=='undefined')?new NotificationHandler():Layout;c['notify']($('#notification_area>.notification')['length']+1,A,'<span><b>'+'Autobot'+'</b></span>'+b+'<span class=\'small notification_date\'>'+'Version '+a['version']+'</span>')},toHHMMSS(A){var b=~~(A/3600),c=~~((A%3600)/60),d=A%60;ret='';b>0&&(ret+=''+b+':'+c<10?'0':'');;ret+=''+c+':'+d<10?'0':'';ret+=`${d}`;return ret},stringify(A){var b=typeof A,c=[];if(b=='string')return`"${A}"`;;if(b=='boolean'||b=='number')return A;;if(b=='function')return A.toString();;for(var d in A)c['push']('"'+d+'":'+this['stringify'](A[d]));;return`{${c['join'](',')}}`},isActive(){setTimeout(function(){DataExchanger.Auth('isActive',a.Account,a['isActive'])},180000)},town_map_info(A,b){if(A!=void 0&&A['length']>0&&b['player_name'])for(var c=0;c<A['length'];c++)if(A[c]['className']=='flag town'){if(Assistant!==void 0){Assistant['settings']['town_names']&&$(A[c])['addClass']('active_town');;Assistant['settings']['player_name']&&$(A[c])['addClass']('active_player');;Assistant['settings']['alliance_name']&&$(A[c])['addClass']('active_alliance')};$(A[c])['append']('<div class="player_name">'+(b['player_name']||'')+'</div>');$(A[c])['append']('<div class="town_name">'+b['name']+'</div>');$(A[c])['append']('<div class="alliance_name">'+(b['alliance_name']||'')+'</div>');break};return A},checkPremium(A){return $(`.advisor_frame.${A} div`)['hasClass'](`${A}_active`)},initWindow(){$('.nui_main_menu')['css']('top','249px');$('<div/>',{class:'nui_bot_toolbox'})['append']($('<div/>',{class:'bot_menu layout_main_sprite'})['append']($('<ul/>')['append']($('<li/>',{id:'Autofarm_onoff',class:'disabled'})['append']($('<span/>',{class:'autofarm farm_town_status_0'})))['append']($('<li/>',{id:'Autoculture_onoff',class:'disabled'})['append']($('<span/>',{class:'autoculture farm_town_status_0'})))['append']($('<li/>',{id:'Autobuild_onoff',class:'disabled'})['append']($('<span/>',{class:'autobuild toolbar_activities_recruits'})))['append']($('<li/>',{id:'Autoattack_onoff',class:'disabled'})['append']($('<span/>',{class:'autoattack sword_icon'})))['append']($('<li/>')['append']($('<span/>',{href:'#',class:'botsettings circle_button_settings'})['on']('click',function(){a['isLogged']&&a['initWnd']()})['mousePopup'](new MousePopup(DM['getl10n']('COMMON')['main_menu']['settings']))))))['append']($('<div/>',{id:'time_autobot',class:'time_row'}))['append']($('<div/>',{class:'bottom'}))['insertAfter']('.nui_left_box')},initMapTownFeature(){MapTiles['createTownDiv']=(function(_){return function(...args){return a['town_map_info'](_['apply'](this,args),args[0])}})(MapTiles['createTownDiv'])},checkAutoRelogin(){if($['cookie']('pid')!==void 0&&$['cookie']('ig_conv_last_site')!==void 0){var A=$['cookie']('ig_conv_last_site')['match'](/\/\/(.*?)\.grepolis\.com/g)[0]['replace']('//','')['replace']('.grepolis.com','');DataExchanger.Auth('checkAutorelogin',{player_id:$['cookie']('pid'),world_id:A},function(_){_&&setTimeout(function(){DataExchanger['login_to_game_world'](A)},_*1000)})}}};(function(){String['prototype']['capitalize']=function(){return this['charAt'](0)['toUpperCase']()+this['slice'](1)};$['fn']['serializeObject']=function(){var _={};$['each'](this['serializeArray'](),function(){if(_[this['name']]!==void 0){!_[this['name']]['push']&&(_[this['name']]=[_[this['name']]]);;_[this['name']]['push'](this['value']||'')}else _[this['name']]=this['value']||''});return _};var A=setInterval(function(){if(window!=void 0)if($('.nui_main_menu')['length']&&!$['isEmptyObject'](ITowns['towns'])){clearInterval(A);a['initWindow']();a['initMapTownFeature']();$['getScript'](a['scriptDomain']+'Evaluate.js',function(){$['when']($['getScript'](a['scriptDomain']+'DataExchanger.js'),$['getScript'](a['scriptDomain']+'ConsoleLog.js'),$['getScript'](a['scriptDomain']+'FormBuilder.js'),$['getScript'](a['scriptDomain']+'ModuleManager.js'),$['getScript'](a['scriptDomain']+'Assistant.js'),$.Deferred(_0x88b7x44=>$(_0x88b7x44['resolve'])))['done'](()=>a['init']())})}else /grepolis\.com\/start\?nosession/g['test'](window['location']['href'])&&(clearInterval(A),$['getScript'](a['scriptDomain']+'Evaluate.js',function(){$['when']($['getScript'](a['scriptDomain']+'DataExchanger.js'),$['getScript'](a['scriptDomain']+'Redirect.js'),$.Deferred(_0x88b7x44=>$(_0x88b7x44['resolve'])))['done'](()=>a['checkAutoRelogin']())}))},1000)})();
